<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>WhoRAM &middot; Blowfish</title>
  <meta name="title" content="WhoRAM &middot; Blowfish" />
  
  <meta name="description" content="Desc Text." />
  <meta name="keywords" content="first, " />
  
  
  <link rel="canonical" href="https://0xttfx.github.io/posts/whoram/whoram/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.4d4b1b35ed4fb37d198f5f4fa732e64404b535101cdef4401ac22e7c91380b82f3c8e5d51ae61f0149e6a95694c77e5a40943ca8480609a230c10f33c1fc11b4.css"
    integrity="sha512-TUsbNe1Ps30Zj19PpzLmRAS1NRAc3vRAGsIufJE4C4LzyOXVGuYfAUnmqVaUx35aQJQ8qEgGCaIwwQ8zwfwRtA==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.bd59ef8d591a8791be95815d202976ffd137f05712b3d68318c743252786ac432125c68ac83ad04ceafb3b9dfb9cbeed0de9a073d1a641deffe41b2fe15e5e1e.js"
    integrity="sha512-vVnvjVkah5G&#43;lYFdICl2/9E38FcSs9aDGMdDJSeGrEMhJcaKyDrQTOr7O537nL7tDemgc9GmQd7/5Bsv4V5eHg==" data-copy="" data-copied=""></script>
  
  <script src="/js/zoom.min.js"></script>
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="WhoRAM" />
<meta property="og:description" content="Desc Text." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://0xttfx.github.io/posts/whoram/whoram/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-15T20:25:31-03:00" />
<meta property="article:modified_time" content="2023-11-15T20:25:31-03:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="WhoRAM"/>
<meta name="twitter:description" content="Desc Text."/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "",
    "name": "WhoRAM",
    "headline": "WhoRAM",
    "description": "Desc Text.",
    "abstract": "RAM √© um hardware valioso e caro bem como a sua lat√™ncia √© ainda mais importante que a lat√™ncia do disco.",
    "inLanguage": "en",
    "url" : "https:\/\/0xttfx.github.io\/posts\/whoram\/whoram\/",
    "author" : {
      "@type": "Person",
      "name": "Thiago Torres Faioli"
    },
    "copyrightYear": "2023",
    "dateCreated": "2023-11-15T20:25:31-03:00",
    "datePublished": "2023-11-15T20:25:31-03:00",
    
    "dateModified": "2023-11-15T20:25:31-03:00",
    
    "keywords": ["first"],
    
    "mainEntityOfPage": "true",
    "wordCount": "2896"
  }]
  </script>


  
  
  <meta name="author" content="Thiago Torres Faioli" />
  
  
  
  <link href="mailto:thiago.faioli@gmail.com" rel="me" />
  
  
  <link href="https://link-to-some-website.com/" rel="me" />
  
  
  <link href="https://github.com/0xttfx" rel="me" />
  
  
  <link href="https://instagram.com/0xttfx" rel="me" />
  
  
  <link href="https://linkedin.com/in/thiagofaioli" rel="me" />
  
  
  <link href="https://t.me/0xttfx" rel="me" />
  
  
  <link href="https://twitter.com/0xttfx" rel="me" />
  
  
  <link href="https://wa.me/5531984494065" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.js" integrity=""></script>


















  
  

  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px]" style="z-index:100">
  <div id="menu-blur" class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div>
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Blowfish</a>


        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/posts/"  class="flex items-center">
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
        Posts
    </p>
</a>


            
            
  <a href="/tags/"  class="flex items-center">
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="Tags">
        Tags
    </p>
</a>


            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button">
                    <div class="flex items-center justify-center h-12 dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden h-12 dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" style="margin-right:5px">
                <div class="flex items-center justify-center h-12 dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden h-12 dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" for="menu-controller" class="block">
            <input type="checkbox" id="menu-controller" class="hidden" />
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li>
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    
                    

                    
  <li class="mt-1">
    <a href="/posts/"  class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            Posts
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="/tags/"  class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="Tags">
            Tags
        </p>
    </a>
</li>



                    
                    

                </ul>
                

            </div>
        </label>
    </div>
</div>





  </div>
</div>
<script>
  window.addEventListener('scroll', function (e) {
    var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
    var background_blur = document.getElementById('menu-blur');
    background_blur.style.opacity = (scroll / 300);
  });
</script>

  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  


<div id="hero" class="h-[150px] md:h-[200px]"></div>


    
    <div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"
    style="background-image:url(/img/background_hu3d03a01dcc18bc5be0e67db3d8d209a6_1561197_1200x0_resize_q75_box.jpg);">
    


    <div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
    </div>
    <div
        class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal">
    </div>
</div>

<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>
<script>
    window.addEventListener('scroll', function (e) {
        var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        var background_blur = document.getElementById('background-blur');
        background_blur.style.opacity = (scroll / 300)
    });
</script>

  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      ></a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/"
      >posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/whoram/"
      >posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/whoram/whoram/"
      >WhoRAM</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      WhoRAM
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      




































<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2023-11-15 20:25:31 -0300 -03">15 November 2023</time><span class="px-2 text-primary-500">&middot;</span><span>2896 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">14 mins</span>
  

  
  
</div>







    </div>

    
    
    
    
    

    
    
    
<div class="flex">
  
  
  
  
  
  
  <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
    alt="Thiago Torres Faioli" src="/img/faioli_hudfdf82349cdc312abbd43e98650d2787_55546_192x192_fill_q75_box_center.jpg" />
  
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      Thiago Torres Faioli
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">Vicissitudes e adjac√™ncias&hellip;</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:thiago.faioli@gmail.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://link-to-some-website.com/"
          target="_blank"
          aria-label="Link"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/0xttfx"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://instagram.com/0xttfx"
          target="_blank"
          aria-label="Instagram"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://linkedin.com/in/thiagofaioli"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://t.me/0xttfx"
          target="_blank"
          aria-label="Telegram"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://twitter.com/0xttfx"
          target="_blank"
          aria-label="X-Twitter"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://wa.me/5531984494065"
          target="_blank"
          aria-label="Whatsapp"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>
    

    
    
    

    

    
    <div class="mb-5"></div>
    
  
  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#mas-o-que-√©-page-cache">Mas o que √© Page Cache</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#mas-o-que-√©-page-cache">Mas o que √© Page Cache</a></li>
  </ul>
</nav>
  </div>
</details>

   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="max-w-prose mb-20">
          <p>RAM √© um hardware valioso e caro bem como a sua lat√™ncia √© ainda mais importante que a lat√™ncia do disco. E por isso, o kernel Linux tenta ao m√°ximo otimizar os uso da mem√≥ria, fazendo uso de t√©cnicas como compartilhando de p√°ginas entre processos e Page Cache para melhorar a velocidade de I/O de armazenamento, armazenando um subconjunto de dados do disco na mem√≥ria.
O Page Cache realiza compartilhamento impl√≠cito de mem√≥ria e de forma ass√≠ncrona com o armazenamento em segundo plano! Isso por s√≠ s√≥, traz ainda mais complexidade √† estimativa de uso de mem√≥ria por parte dos administradores!</p>
<div id="mas-o-que-√©-page-cache" class="anchor"></div>
<h2 class="relative group">Mas o que √© Page Cache 
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#mas-o-que-%c3%a9-page-cache" aria-label="Anchor">#</a></span>        
    
</h2>
<p>o Page Cache faz parte do <a href="https://en.wikipedia.org/wiki/Virtual_file_system"   target="_blank">
    Virtual File System - VFS</a> que √© uma camada de software do n√∫cleo que trata de todas as chamadas de sistema relacionadas a um sistema de arquivos Unix.
Sua principal vantagem √© prover uma interface gen√©rica para diversos tipos de sistemas de arquivos. Ou seja, o VFS permite que chamadas de sistemas gen√©ricas, tais como open( ) e read( ),possam ser executadas independentemente do sistema de arquivos usados ou do meio f√≠sico! O que implica diretamente na lat√™ncia de I/O das opera√ß√µes de leitura e grava√ß√£o.</p>
<ul>
<li>
<p>Quando um sistema grava dados no cache, em algum momento ele tamb√©m deve gravar esses dados no armazenamento. O tempo dessa grava√ß√£o √© controlado pelo que √© conhecido como <em>write policy</em>, e existem duas abordagens b√°sicas de escrita:</p>
<ul>
<li><em>Write-through</em>: a grava√ß√£o √© feita de forma s√≠ncrona tanto no cache quanto no armazenamento de apoio.</li>
<li><em>Write-back</em>: inicialmente, a escrita √© feita apenas no cache. A grava√ß√£o no armazenamento de apoio √© adiada at√© que o conte√∫do modificado esteja prestes a ser substitu√≠do por outro bloco de cache.
<ul>
<li>Nesse <a href="https://en.wikipedia.org/wiki/Cache_%28computing%29#Writing_policies"   target="_blank">
    link voc√™ pode ter mais informa√ß√µes sobre o algor√≠timo</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Page √© a unidade de mem√≥ria que o Kernel trabalha com Page Cache, e geralmente possui 4k de comprimento m√≠nimo de armazenamento no Page Cache. Dessa forma todo I/O de arquivo est√° alinhado a uma quantidade espec√≠fica de p√°ginas&hellip;</p>
<p>At√© aqui, podemos entender que o Page Cache, √© o principal cache de disco usado pelo kernel do Linux. Sendo utilizado ao ler ou gravar no disco; quando novas p√°ginas s√£o adicionadas ao cache de p√°ginas para satisfazer as solicita√ß√µes de leitura dos processos do Modo de Usu√°rio.</p>
<ul>
<li>
<p>Se a p√°gina ainda n√£o estiver no cache, uma nova entrada ser√° adicionada ao cache e preenchida com os dados lidos do disco. Se houver mem√≥ria livre suficiente, a p√°gina √© mantida no cache por um per√≠odo indefinido e pode ent√£o ser reutilizada por outros processos sem acessar o disco.</p>
</li>
<li>
<p>Da mesma forma, antes de gravar uma p√°gina de dados em um dispositivo de bloco, o kernel verifica se a p√°gina correspondente j√° est√° inclu√≠da no cache; caso contr√°rio, uma nova entrada √© adicionada ao cache e preenchida com os dados a serem gravados no disco.</p>
<ul>
<li>A transfer√™ncia de dados de I/O n√£o come√ßa imediatamente: a atualiza√ß√£o do disco √© atrasada por alguns segundos, dando assim aos processos a chance de modificar ainda mais os dados a serem gravados (em outras palavras, o kernel implementa opera√ß√µes de deferred write).</li>
</ul>
</li>
</ul>
<p>As p√°ginas inclu√≠das no Page Cache podem ser dos seguintes tipos:</p>
<ul>
<li>Pages contendo dados de arquivos regulares; no Cap√≠tulo 16, descrevemos como o kernel lida com opera√ß√µes de leitura, grava√ß√£o e mapeamento de mem√≥ria neles.</li>
<li>Pages contendo diret√≥rios; o Linux lida com os diret√≥rios de forma muito semelhante aos arquivos normais.</li>
<li>Pages contendo dados lidos diretamente de arquivos de dispositivos de bloco (ignorando a camada do sistema de arquivos); o kernel os trata usando o mesmo
conjunto de fun√ß√µes como para pages contendo dados de arquivos regulares.</li>
<li>Pages contendo dados de processos do Modo Usu√°rio que foram trocados em disco; o kernel pode ser for√ßado a manter-se armazenado em page cache algumas pages cujo conte√∫do j√° foi escrito em uma √°rea de swap.</li>
<li>Pages pertencentes a arquivos de sistemas de arquivos especiais, como o sistema de arquivos especial <em>shm</em> usado para regi√£o de mem√≥ria compartilhada de comunica√ß√£o entre processos (IPC).</li>
</ul>
<p>Como podemos ver, cada page inclu√≠da no Page Cache cont√©m dados pertencentes a algum arquivo. Este arquivo ‚Äì ou mais precisamente o inode do arquivo ‚Äì √© chamado de page‚Äôs owner.</p>
<p>Praticamente todas as opera√ß√µes read() e write() de arquivos dependem do Page Cache.</p>
<ul>
<li>a √∫nica exce√ß√£o ocorre quando um processo abre um arquivo com a flag O_DIRECT definido: neste caso, o cache da p√°gina √© ignorado e as transfer√™ncias de dados de E/S fazem uso de buffers no espa√ßo de endere√ßo do modo de usu√°rio do processo.
<ul>
<li>V√°rias aplica√ß√µes database fazem uso da flag O_DIRECT pra que assim possam faze uso do pr√≥prio algor√≠timo de caching&hellip;</li>
</ul>
</li>
</ul>
<p>Os projetistas do kernel implementaram o Page Cache para atender a dois requisitos principais:</p>
<ul>
<li>Localizar rapidamente um page espec√≠fica contendo dados relativos a um determinado propriet√°rio.
Para aproveitar ao m√°ximo o cache da p√°gina, pesquis√°-lo deve ser uma opera√ß√£o muito r√°pida.</li>
<li>Acompanhar como cada page do cache deve ser tratada ao ler ou escrever seu conte√∫do.
<ul>
<li>Por exemplo, a leitura de uma page de um arquivo regular, ou de um arquivo de dispositivo de bloco ou de uma √°rea de swap, deve ser realizada de diferentes maneiras, portanto o kernel deve selecionar a opera√ß√£o adequada dependendo do propriet√°rio da p√°gina.</li>
</ul>
</li>
</ul>
<p>A unidade de informa√ß√£o mantida no page cache √©, obviamente, uma p√°gina inteira de dados.</p>
<ul>
<li>uma p√°gina n√£o cont√©m necessariamente blocos de disco fisicamente adjacentes, portanto ela n√£o pode ser identificada por um n√∫mero de dispositivo e um n√∫mero de bloco.
<ul>
<li>Em vez disso, uma p√°gina no Page Cache √© identificada por um propriet√°rio e por um √≠ndice nos dados do propriet√°rio ‚Äì geralmente, um inode e um deslocamento dentro do arquivo correspondente.</li>
</ul>
</li>
</ul>
<p>A estrutura de dados principal do cache de p√°gina √© o objeto address_space, uma estrutura de dados incorporada no objeto inode que possui a p√°gina.* Muitas p√°ginas no cache podem referir-se ao mesmo propriet√°rio, portanto, podem estar vinculadas ao mesmo objeto address_space. Este objeto tamb√©m estabelece uma liga√ß√£o entre as p√°ginas do propriet√°rio e um conjunto de m√©todos que operam nessas p√°ginas. Cada descritor de p√°gina inclui dois campos chamados mapeamento e √≠ndice, que vinculam a p√°gina ao cache de p√°ginas (consulte a se√ß√£o ‚ÄúDescritores de p√°ginas‚Äù no Cap√≠tulo 8). O primeiro campo aponta para o objeto address_space do inode que possui a p√°gina. O segundo campo especifica o deslocamento em unidades de tamanho de p√°gina dentro do ‚Äúespa√ßo de endere√ßo‚Äù do propriet√°rio, ou seja, a posi√ß√£o dos dados da p√°gina dentro da imagem de disco do propriet√°rio. Esses dois campos s√£o usados ao procurar uma p√°gina no cache de p√°ginas. Surpreendentemente, o cache de p√°ginas pode conter m√∫ltiplas c√≥pias dos mesmos dados do disco. Por exemplo, o mesmo bloco de dados de 4 KB de um arquivo normal pode ser acessado das seguintes maneiras: * Ocorre uma exce√ß√£o para p√°ginas que foram trocadas. Como veremos no Cap√≠tulo 17, essas p√°ginas possuem um objeto address_space comum n√£o inclu√≠do em nenhum inode. Este √© o t√≠tulo do livro, edi√ß√£o eMatter Copyright ¬© 2007 O‚ÄôReilly &amp; Associates, Inc. Todos os direitos reservados. 602</p>
<p>Dessa forma vamos tentar algumas abordagens para determinar valores mais pr√≥ximos do real para o consumo de mem√≥ria RAM.</p>
<div id="rss-e-vsz" class="anchor"></div>
<h1 class="relative group">RSS e VSZ 
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#rss-e-vsz" aria-label="Anchor">#</a></span>        
    
</h1>
<p>Vamos come√ßar tendo como referencia o <strong>VSZ</strong> que √© o tamanho da mem√≥ria virtual que o Linux concedeu a um processo. Mas n√£o necessariamente o processo est√° usando o valor informado. Um dos motivos s√£o programas com fun√ß√µes para realizar determinadas tarefas, mas s√≥ as carregam na RAM, quando necess√°rio. Bem como tamb√©m a pagina√ß√£o por demanda do Linux, que s√≥ carrega p√°ginas na mem√≥ria quando o aplicativo tenta us√°-las&hellip;  Por isso a leitura que devemos fazer do valor √©: <em>mem√≥ria se carregadas todas as suas fun√ß√µes e bibliotecas na mem√≥ria f√≠sica.</em></p>
<p>J√° <strong>RSS</strong>, √© o tamanho do conjunto residente. √â a quantidade de RAM que o processo no momento para carregar as suas p√°ginas. Ainda assim n√£o podemos tomar essa informa√ß√£o como concreta, devido as bibliotecas compartilhadas torna-se um  valor impreciso por superestimativa&hellip;</p>
<ol>
<li>
<p>Primeiro criamos um processo em um novo cgroup</p>
<ul>
<li>Rodamos o comanod <em>mtr</em> utilizando o <code>systemd-run</code> para isol√°-lo num cgroup(por que sim&hellip;rs)
<pre tabindex="0"><code>systemd-run --user -P -t -G --wait mtr 8.8.8.8
</code></pre></li>
</ul>
</li>
<li>
<p>Em seguida coletamos o seu PID e verificamos os valores de RSS e VSZ</p>
<ul>
<li>Com o comando <code>ps</code> coletamos seu PID e os dados de RSS e VSZ
<ul>
<li>O PID do processo
<pre tabindex="0"><code>$ ps -aux |grep -E systemd-run.*mtr | grep -v grep |awk &#39;{print $2}&#39;
236341
</code></pre></li>
<li>E os dados de RSS e VSZ
<pre tabindex="0"><code>$  ps -o rss,vsz,cmd -p $(ps -aux |grep -E systemd-run.*mtr | grep -v grep |awk &#39;{print $2}&#39;)
  RSS    VSZ CMD
 7168  14940 systemd-run --user -P -t -G --wait mtr 8.8.8.8
</code></pre><ul>
<li>S√≥ a t√≠tulo de cuiriosidade, segue algumas formas de coverter o valor para megabytes:
<pre tabindex="0"><code>$ echo $((7168/1024))
7

ou

$ echo $((7168/1024)) |xargs -i printf &#34;%&#39;.1f MB&#34; {}
7.0 MB

ou

$ numfmt --from=si --to=iec 7168K
6.9M

ou

$ numfmt --from=si --to-unit=1Mi --grouping 7168K
7
</code></pre></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Podemos ver que o processo est√° consumindo <strong>7168 Kilobytes</strong>.</p>
</li>
<li>
<p>Em seguida usamos o <strong>procfs</strong> para ter mais detalhes desse uso de RAM que o RSS est√° apontando.</p>
<ul>
<li>Vamos ver o arquivo <code>smaps_rollup</code> que √© uma soma das √°reas de mem√≥ria do <code>smaps</code> do nosso PID
<pre tabindex="0"><code>$ cat /proc/236341/smaps_rollup 
559517c38000-7ffe5c398000 ---p 00000000 00:00 0                          [rollup]
Rss:                7368 kB
Pss:                1171 kB
Pss_Dirty:           868 kB
Pss_Anon:            868 kB
Pss_File:            303 kB
Pss_Shmem:             0 kB
Shared_Clean:       6444 kB
Shared_Dirty:          0 kB
Private_Clean:        56 kB
Private_Dirty:       868 kB
Referenced:         7368 kB
Anonymous:           868 kB
LazyFree:              0 kB
AnonHugePages:         0 kB
ShmemPmdMapped:        0 kB
FilePmdMapped:         0 kB
Shared_Hugetlb:        0 kB
Private_Hugetlb:       0 kB
Swap:                  0 kB
SwapPss:               0 kB
Locked:                0 kB
</code></pre>Para as m√©tricas listadas
<ul>
<li><strong>RSS</strong> que j√° √© nossa conhecida.</li>
<li><strong>PSS</strong> Proportional Set Size √© o compartilhamento proporcional de mem√≥ria do processo. √â a contagem de p√°ginas que ele possui na mem√≥ria, onde cada p√°gina √© dividida pelo n√∫mero de processos que a compartilham. Portanto, se um processo tiver 1.000 p√°ginas s√≥ para ele e 1.000 compartilhadas com outro processo, seu PSS ser√° 1.500.</li>
<li><strong>Shared_Clean</strong> aqui vemos que nosso processo usa cache de p√°gina. E representa o maior uso da mem√≥ria. No arquivo <em>smaps</em>, conseguimos ver todas as bibliotecas compartilhadas que foram abertas com mmap() e residem no Page Cache.</li>
<li><strong>Shared_Dirty</strong> quando o processo grava em arquivos com mmap(), esta linha mostra a quantidade de mem√≥ria suja do cache de p√°gina ainda n√£o salva.</li>
<li><strong>Referenced</strong> √© a quantidade de mem√≥ria referenciada ou acessada at√© o momento. O valor √© sempre igual ou pr√≥ximo RSS.</li>
<li><strong>Anonymous</strong> mostra a quantidade de mem√≥ria que n√£o pertence a nenhum arquivo.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>At√© qui podemos ver que, embora o comando PS e Top nos mostre um RSS de 7MiB, a maior parte de seu RSS est√° oculto no cache de p√°gina e que quando ficarem inativas por um tempo, essas p√°ginas, ser√£o removidas da RAM pelo kernel.</p>
<p><a href="https://lwn.net/Articles/642202/"   target="_blank">
    Nesse artigo</a> do LWN.net temos mais informa√ß√µes direto da fonte ;).</p>
<div id="pmap" class="anchor"></div>
<h1 class="relative group">PMAP 
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#pmap" aria-label="Anchor">#</a></span>        
    
</h1>
<p>O kernel Linux 2.6.32 deu ao Linux um recurso chamado ‚ÄúKernel SamePage Merging‚Äù. Isso significa que o Linux pode detectar regi√µes id√™nticas de dados em diferentes espa√ßos de endere√ßo. Imagine uma s√©rie de m√°quinas virtuais rodando em um √∫nico computador, e todas as m√°quinas virtuais rodando o mesmo sistema operacional. Usando um modelo de mem√≥ria compartilhada e c√≥pia na grava√ß√£o, a sobrecarga no computador host pode ser drasticamente reduzida.</p>
<p>Tudo isso torna sofisticado o manuseio de mem√≥ria no Linux. Mas √© dif√≠cil observar um processo e saber qual √© realmente o seu uso de mem√≥ria.</p>
<p>O kernel exp√µe muito do que est√° fazendo com a RAM por meio de dois pseudoarquivos no pseudosistema de arquivos de informa√ß√µes do sistema ‚Äú/proc‚Äù. Existem dois arquivos por processo, nomeados de acordo com o ID do processo ou PID de cada processo:* ‚Äú/proc/$PID/maps‚Äù e ‚Äú/proc/$PID/smaps‚Äù.</p>
<p>O valor [ anon ] √© o mapeamento de mem√≥ria an√¥nimo, que faz parte da mem√≥ria preenchida com dados n√£o retirados do sistema de arquivos, mas alocados quando necess√°rio.</p>
<p>üññ</p>
<ul>
<li>
<p><em>Address:</em> The beginning memory address allocation</p>
</li>
<li>
<p><em>Kbytes:</em> Memory allocation in kilobytes</p>
</li>
<li>
<p><em>RSS:</em> Resident set size of the process in memory</p>
</li>
<li>
<p><em>Dirty:</em> The status of the memory pages</p>
</li>
<li>
<p><em>Mode:</em> Access mode and privileges</p>
</li>
<li>
<p><em>Mapping:</em> The user-facing name of the application or library</p>
</li>
<li>
<p><em>Offset:</em>	offset into the file</p>
</li>
<li>
<p><em>Device:</em>	device name (major:minor)</p>
</li>
<li>
<p><em>r:</em> The mapped memory can be read by the process.</p>
</li>
<li>
<p><em>w:</em> The mapped memory can be written by the process.</p>
</li>
<li>
<p><em>x:</em> The process can execute any instructions contained in the mapped memory.</p>
</li>
<li>
<p><em>s:</em> The mapped memory is shared, and changes made to the shared memory are visible to all of the processes sharing the memory.</p>
</li>
<li>
<p><em>R:</em> There is no reservation for swap space for this mapped memory.</p>
</li>
<li>
<p><em>Address:</em> The start address of this mapping. This uses virtual memory addressing.</p>
</li>
<li>
<p><em>Perm:</em> The permissions of the memory.</p>
</li>
<li>
<p><em>Offset:</em> If the memory is file-based, the offset of this mapping inside the file.</p>
</li>
<li>
<p><em>Device:</em> The Linux device number, given in major and minor numbers. You can see the device numbers on your computer by running the lsblk command.</p>
</li>
<li>
<p><em>Inode:</em> The inode of the file the mapping is associated with. For example, in our example, this could be the inode that holds information about the pm program.</p>
</li>
<li>
<p><em>Size:</em> The size of the memory-mapped region.</p>
</li>
<li>
<p><em>KernelPageSize:</em> The page size used by the kernel.</p>
</li>
<li>
<p><em>MMUPageSize:</em> The page size used by the memory management unit.</p>
</li>
<li>
<p><em>Rss:</em> This is the resident set size. That is, the amount of memory that is currently in RAM, and not swapped out.</p>
</li>
<li>
<p><em>Pss:</em> This is the proportional share size. This is the private shared size added to the (shared size divided by the number of shares.)</p>
</li>
<li>
<p><em>Shared_Clean:</em> The amount of memory shared with other processes that has not been altered since the mapping was created. Note that even if memory is shareable, if it hasn&rsquo;t actually been shared it is still considered private memory.</p>
</li>
<li>
<p><em>Shared_Dirty:</em> The amount of memory shared with other processes that has been altered since the mapping was created.</p>
</li>
<li>
<p><em>Private_Clean:</em> The amount of private memory&mdash;not shared with other processes&mdash;that has not been altered since the mapping was created.</p>
</li>
<li>
<p><em>Private_Dirty:</em> The amount of private memory that has been altered since the mapping was created.</p>
</li>
<li>
<p><em>Referenced:</em> The amount of memory currently marked as referenced or accessed.</p>
</li>
<li>
<p><em>Anonymous:</em> Memory that does not have a device to swap out to. That is, it isn&rsquo;t file-backed.</p>
</li>
<li>
<p><em>LazyFree:</em> Pages that have been flagged as MADV_FREE. These pages have been marked as available to be freed and reclaimed, even though they may have unwritten changes in them. However, if subsequent changes occur after the MADV_FREE has been set on the memory mapping, the MADV_FREE flag is removed and the pages will not be reclaimed until the changes are written.</p>
</li>
<li>
<p><em>AnonHugePages:</em> These are non-file backed &ldquo;huge&rdquo; memory pages (larger than 4 KB).</p>
</li>
<li>
<p><em>ShmemPmdMapped:</em> Shared memory associated with huge pages. They may also be used by filesystems that reside entirely in memory.</p>
</li>
<li>
<p><em>FilePmdMapped:</em> The Page Middle Directory is one of the paging schemes available to the kernel. This is the number of file-backed pages pointed to by PMD entries.</p>
</li>
<li>
<p><em>Shared_Hugetlb:</em> Translation Lookaside Tables, or TLBs, are memory caches used to optimize the time taken to access userspace memory locations. This figure is the amount of RAM used in TLBs that are associated with shared huge memory pages.</p>
</li>
<li>
<p><em>Private_Hugetlb:</em> This figure is the amount of RAM used in TLBs that are associated with private huge memory pages.</p>
</li>
<li>
<p><em>Swap:</em> The amount of swap being used.</p>
</li>
<li>
<p><em>SwapPss:</em> The swap proportional share size. This is the amount of swap made up of swapped private memory pages added to the (shared size divided by the number of shares.)</p>
</li>
<li>
<p><em>Locked:</em> Memory mappings can be locked to prevent the operating system from paging out heap or off-heap memory.</p>
</li>
<li>
<p><em>THPeligible:</em> This is a flag indicating whether the mapping is eligible for allocating transparent huge pages. 1 means true, 0 means false. Transparent huge pages is a memory management system that reduces the overhead of TLB page lookups on computers with a large amount of RAM.</p>
</li>
<li>
<p><em>VmFlags:</em> See the list of flags below.</p>
</li>
<li>
<p><em>Mapping:</em> The name of the source of the mapping. This can be a process name, library name, or system names such as stack or heap.</p>
</li>
</ul>
<p>The VmFlags - will be a subset of the following list.</p>
<ul>
<li><em>rd:</em> Readable.</li>
<li><em>wr:</em> Writeable.</li>
<li><em>ex:</em> Executable.</li>
<li><em>sh:</em> Shared.</li>
<li><em>mr:</em> May read.</li>
<li><em>mw:</em> May write.</li>
<li><em>me:</em> May execute.</li>
<li><em>ms:</em> May share.</li>
<li><em>gd:</em> Stack segment grows down.</li>
<li><em>pf:</em> Pure page frame number range. Page frame numbers are a list of the physical memory pages.</li>
<li><em>dw:</em> Disabled write to the mapped file.</li>
<li><em>lo:</em> Pages are locked in memory.</li>
<li><em>io:</em> Memory-mapped I/O area.</li>
<li><em>sr:</em> Sequential read advise provided (by the madvise() function.)</li>
<li><em>rr:</em> Random read advise provided.</li>
<li><em>dc:</em> Do not copy this memory region if the process is forked.</li>
<li><em>de:</em> Do not expand this memory region on remapping.</li>
<li><em>ac:</em> Area is accountable.</li>
<li><em>nr:</em> Swap space is not reserved for the area.</li>
<li><em>ht:</em> Area uses huge TLB pages.</li>
<li><em>sf:</em> Synchronous page fault.</li>
<li><em>ar:</em> Architecture-specific flag.</li>
<li><em>wf:</em> Wipe this memory region if the process is forked.</li>
<li><em>dd:</em> Do not include this memory region in core dumps.</li>
<li><em>sd:</em> Soft dirty flag.</li>
<li><em>mm:</em> Mixed map area.</li>
<li><em>hg:</em> Huge page advise flag.</li>
<li><em>nh:</em> No huge page advise flag.</li>
<li><em>mg:</em> Mergeable advise flag.</li>
<li><em>bt:</em> ARM64 bias temperature instability guarded page.</li>
<li><em>mt:</em> ARM64 Memory tagging extension tags are enabled.</li>
<li><em>um:</em> Userfaultfd missing tracking.</li>
<li><em>uw:</em> Userfaultfd wr-protect tracking.</li>
</ul>

        </div>
                
        

        

        


<h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2>
<section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3">
  
  

  <a href="/posts/dokawsrds/ip-dok-awsrds/" class="min-w-full">
    
    <div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative backdrop-blur">

      <div class="px-6 py-4">

        
        <div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral"
          href="/posts/dokawsrds/ip-dok-awsrds/">IP DOK Set or Drop Sec Group AWS EC2 RDS</div>
        

        <div class="text-sm text-neutral-500 dark:text-neutral-400">
          

































<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2023-11-06 00:00:00 &#43;0000 UTC">6 November 2023</time><span class="px-2 text-primary-500">&middot;</span><span>165 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">1 min</span>
  

  
  
</div>







        </div>

        
        <div class="py-1 prose dark:prose-invert">
          DigitalOcean Kubernetes and AWS RDS Security Group
        </div>
        
      </div>
      <div class="px-6 pt-4 pb-2">

      </div>
    </div>
  </a>
  
</section>

  
      </div>
     
     <script>
        var oid = "views_posts\/whoram\/whoram.md"
        var oid_likes = "likes_posts\/whoram\/whoram.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js" integrity="sha512-DkmXO0rQo4LHxgEti/&#43;CJjFmQtqrxPiiBHe9CGdPPabi&#43;pk7wgrU9R58W7aOb5E6IHp8T&#43;N&#43;oOe4BolK/OCmTg=="></script>
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2023
      Thiago Torres Faioli
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js" integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script>
  
  
</footer><div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://0xttfx.github.io"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
